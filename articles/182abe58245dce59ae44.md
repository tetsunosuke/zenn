---
title: " zoom-sdk-electron ã§ã§ãã‚‹ã“ã¨ã‚’èª¿ã¹ã‚‹ã¾ã§ã®ã‚¢ãƒ¬ã‚³ãƒ¬ï¼ˆQiitaã‚ˆã‚Šè»¢è¼‰ï¼‰"
emoji: "ğŸ‘‹"
type: "tech"
topics: ["electron", "nodejs", "zoom"]
published: true
---

# æ¦‚è¦

zoomãŒæä¾›ã—ã¦ã„ã‚‹Electronã®APIã§ã§ããã†ãªã“ã¨ãŒãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã ã¨ã¡ã‚‡ã£ã¨ã‚ã‹ã‚Šã«ãã„ã®ã§ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã‚ˆã†ã¨æ€ã£ãŸãŒã€æ¡ˆå¤–ãƒãƒã‚Šã©ã“ã‚ãŒå¤šã‹ã£ãŸã®ã§ãã‚Œã«ã¤ã„ã¦ã€‚

## å‚è€ƒè³‡æ–™

[Zoom Electron SDK å…¥é–€
](https://qiita.com/stringthread/items/ef487624ec8508e6401c)

éå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã®ã§ã™ãŒã€å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´å†…å®¹ãŒä¾‹ç¤ºã•ã‚Œã¦ã„ãªãã¦è©°ã¾ã£ã¦ã—ã¾ã£ãŸã®ã§ãã®è£œè¶³ã‚’ã—ãŸã„ã€‚å½“æ™‚ã¨è‹¥å¹²ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç•°ãªã‚‹é–¢ä¿‚ã§è¡Œæ•°ã®ã¨ã“ã‚ãŒãšã‚Œã¦ã—ã¾ã†ã®ã§...

è¨˜äº‹ã‚’èª­ã‚€é™ã‚Šã€ã“ã®æ–¹ã®ã¨ãã¯ã‚€ã—ã‚ç§ãŒæ›¸ã„ã¦ã„ã‚‹ã‚ˆã†ã« SDK Key/Secretã«ã‚ˆã‚‹èªè¨¼ãŒåŸºæœ¬ã ã£ãŸã‚ˆã†ã«è¦‹ãˆã‚‹ã®ã§ã™ãŒ...ï¼ˆhttps://github.com/zoom/zoom-sdk-electron/commit/dbdff5a65dff40c1bccb7a1b269391ea72d8f6b5#diff-3b4cc93c41d4067694a6d9ff6ae923efL643 ã“ã®ã‚³ãƒŸãƒƒãƒˆã§å¤§è¦æ¨¡ã«æ”¹ä¿®ãŒå…¥ã£ã¦ã¾ã™ã­ï¼‰

# ã¾ãšã¯å¿…è¦ãªã‚‚ã®ã®æº–å‚™

â€» å‰æã¨ã—ã¦Macç‰ˆã§å®Ÿæ–½ã—ã¦ã„ã¾ã™

- https://github.com/zoom/zoom-sdk-electron

ã“ã¡ã‚‰ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰å¿…è¦ãªäº‹é …ã‚’ç¢ºèªã—ã¾ã™ã€‚

- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆGitã§cloneã™ã‚‹ï¼‰
  - A device with Mac OS or Windows OS
  - Mac OS: MacOS 10.10 or later. ã¨ã®ã“ã¨
- node.js 12.0.0 version ã¨æ›¸ã„ã¦ã‚ã‚‹
  - nvmã§ç”¨æ„ã—ã¦ãŠã“ã†
- zoomã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆã¾ãŸMarketplaceã§ã®APIã‚­ãƒ¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ç­‰ã®ç”Ÿæˆï¼‰
  - ã‚ã¨ã§ã‚„ã‚Šã¾ã™ 

# åŸºæœ¬ã®æº–å‚™ã€œãƒ“ãƒ«ãƒ‰

node 12.0.0.0 ï¼ˆãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§ã‚ã‚ã›ã‚‹å¿…è¦ã¯ãªã„ã‹ã‚‚ï¼‰

```
$ nvm install 12.0.0
$ node -v
v12.0.0
```

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

```
$ git clone https://github.com/zoom/zoom-sdk-electron
```

æ‰‹é †é€šã‚Šã«å¿…è¦ãªã‚‚ã®ã‚’å…¥ã‚Œã¦ã€ãƒ“ãƒ«ãƒ‰ã—ã¾ã™

```
$ npm install --save-dev electron@5.0.2 -g
$ npm install node-gyp -g
$ npm install bindings -g

$ cd zoom-sdk-electron
$ sh build_nodeaddon_mac.sh
```
æ‰‹å…ƒã®ç’°å¢ƒã§ã¯ã‚ã£ã¡ã‚ƒwarningãŒå‡ºã¾ã—ãŸã€‚

```
gyp info ok
cp: ../../../../../../Bin/Mac/Release: No such file or directory
cp: ./build/Release/zoomsdk.node.dSYM: unable to copy extended attributes to ../../../../../../Bin/Mac/Release: No such file or directory
cp: ../../../../../../Bin/Mac/Release/Contents: No such file or directory
cp: ./build/Release/zoomsdk.node.dSYM/Contents: unable to copy extended attributes to ../../../../../../Bin/Mac/Release/Contents: No such file or directory
cp: ../../../../../../Bin/Mac/Release/Contents/Resources: No such file or directory
cp: ./build/Release/zoomsdk.node.dSYM/Contents/Resources: unable to copy extended attributes to ../../../../../../Bin/Mac/Release/Contents/Resources: No such file or directory
cp: ../../../../../../Bin/Mac/Release/Contents/Resources/DWARF: No such file or directory
cp: ./build/Release/zoomsdk.node.dSYM/Contents/Resources/DWARF: unable to copy extended attributes to ../../../../../../Bin/Mac/Release/Contents/Resources/DWARF: No such file or directory
cp: ../../../../../../Bin/Mac/Release/Contents/Resources/DWARF/zoomsdk.node: No such file or directory
cp: ../../../../../../Bin/Mac/Release/Contents/Info.plist: No such file or directory
```

çµæœçš„ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‚ˆã†ã«ã‚‚è¦‹ãˆã¾ã™ãŒã€å¤§ä¸ˆå¤«ã£ã½ã„ã®ã§çªãé€²ã¿ã¾ã™ã€‚

ãƒ‡ãƒ¢ã®èµ·å‹•

```
$ sh run_demo_mac.sh
run_demo_mac.sh: line 12: cd: ./demo: No such file or directory
```

ã“ã¡ã‚‰ã‚‚ã‚¨ãƒ©ãƒ¼ã‹ï¼Ÿï¼ã¨æ€ã„ã¾ã™ãŒãã†ã„ã†ã‚‚ã‚“ã§ã™ã€‚ã“ã®ã‚ã¨ã„ã‚ã„ã‚ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/13879/bb5d21fb-3c54-0d54-fc2e-86bfe184d7a7.png)


ç„¡äº‹èµ·å‹•ã—ã¾ã—ãŸ...ãŒ...

```
objc[43150]: Class ZoomLauncher3rdSdkIPCReciever is implemented in both /Users/tetsunosuke/work/zoom/electron/zoom-sdk-electron/demo/node_modules/electron/dist/Electron.app/Contents/Frameworks/ZoomSDKChatUI.framework/Versions/A/ZoomSDKChatUI (0x10d2e6b30) and /Users/tetsunosuke/work/zoom/electron/zoom-sdk-electron/demo/node_modules/electron/dist/Electron.app/Contents/Frameworks/zChatApp.bundle/Contents/MacOS/zChatApp (0x115173560). One of the two will be used. Which one is undefined.
InitSDK 0
Error: Send error, 60 Operation timed out
Error: Send error, 60 Operation timed out
Error: Send error, 60 Operation timed out
```

ã‚¨ãƒ©ãƒ¼ã£ã½ã„ãªã«ã‹ãŒå‡ºã¦ã„ã¾ã™ãƒ»ãƒ»ãƒ»ã€‚æ°—ã«ã—ãªãã¦ã‚‚å‹•ä½œã¯ã—ã¦ã„ã‚‹ã®ã§ä¸€æ—¦ç„¡è¦–ã—ã¾ã™ã€‚

# ã§ï¼Ÿ

ã“ã®ã¾ã¾Start Demo ã‚’æŠ¼ã™ã¨

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/13879/43443fa7-2eb4-32f3-ae22-f72c525ae7ae.png)

ã¨ã„ã†ã‚ˆã†ã« `jwt token` ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€jwt token ã®æœ‰åŠ¹æœŸé™ã®ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€ ã¨ã‚Šã‚ãˆãšã®ãŠè©¦ã—ã«ã¯ã€ `SDK Key/SDK Secret` ã®ã»ã†ãŒã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚

ä»¥å¾Œã€ãã®å‰æã§æ‰‹ã‚’å…¥ã‚Œã¦ã„ãã¾ã™ã€‚å‚è€ƒè¨˜äº‹ã® `Zoom Electron SDK å…¥é–€` ã¨ã¯ã“ã“ã‹ã‚‰ãŒã‚„ã‚„ç•°ãªã‚Šã¾ã™ã€‚

# æ‰‹ã‚’åŠ ãˆã¦ã„ãã¾ã™

## ãã®å‰ã«SDKã§ Key/Secret ã‚’ç™ºè¡Œã—ã¦ãŠã

https://marketplace.zoom.us/ ã‚ˆã‚Šã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã—ã¦ã€

Develop â†’ Build App ã¨é¸æŠã—ã¾ã™ã€‚ Choose your app type ã‹ã‚‰ SDK ã‚’é¸æŠã—ã¾ã—ã‚‡ã†ã€‚

å„ç¨®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã¨ 

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/13879/cc2800f3-953b-939b-209d-f7fa50ccfba5.png)

SDK Keyã€ SDK Secret ãŒæ‰•ã„å‡ºã•ã‚Œã‚‹ã®ã§æ§ãˆã¦ãŠãã¾ã™ã€‚

## ã‚¢ãƒ—ãƒªã®èµ·å‹•ã‚’ç°¡ç•¥åŒ–ã—ã¾ã™ã€‚

ã“ã¡ã‚‰ã‚‚å‚è€ƒè¨˜äº‹ã¨åŒæ§˜ã«å†…éƒ¨ãƒ•ãƒ­ãƒ¼ã‚’æŠŠæ¡ã—ã¦ãŠãã¨

- main.js: createWindow() -> showDomainWindow() -> pages/domain.html ãŒé–‹ã‹ã‚Œã‚‹
- dmain.html: doinit() -> senddomainmsg() -> asynchronous-message ã§ "setDomain", ç”»é¢ã§é¸ã°ã‚ŒãŸdomain, enable_logãŒãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã«é€ã‚‰ã‚Œã‚‹
- main:js ã¯ asynchronous-messageã‚’å—ã‘å–ã£ã¦`functionObj[arg1](arg2, arg3, arg4, arg5);` ã‚’å‘¼ã³å‡ºã™

ã¨ã„ã†æµã‚Œã«ãªã£ã¦ãŠã‚Šã€ã€Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€æ“ä½œã¯

```diff
 function createWindow() {
   // Create the browser window.
-  showDomainwindow();
+  // showDomainwindow();
+  functionObj["setDomain"](
+      "https://www.zoom.us", /* domain */
+      true                    /* enable_log */
+  );
 }
```
ã“ã†ã—ãŸã®ã¨åŒã˜ã¨è¨€ãˆã¾ã™ã€‚

â€» ã¨ã“ã‚ã§ã“ã®domainã£ã¦ä¸€ä½“ä½•ãƒ»ãƒ»ãƒ»ï¼Ÿ

ã¾ãŸã€ jwt tokenã‚’è¦æ±‚ã™ã‚‹ç”»é¢ã¯ `pages/index.html` ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã¯ã€ ProcSDKReady() ãŒå‘¼ã°ã‚ŒãŸã¨ãã«ã€ showAuthWindow() ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã­ã€‚

ã“ã“ã‹ã‚‰å…ˆã®å‡¦ç†ã¯

- index.html: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã€€dosdkauth() ãŒå‘¼ã°ã‚Œã‚‹ -> authWithJwtToken ãŒ asynchronous-messageã§å‘¼ã³å‡ºã•ã‚Œã‚‹

ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€ã“ã“ã‚’ä¸€æ°—ã«ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚

ä»Šå›ã¯èªè¨¼ã‚’SDKã®Key/Secretã§è¡Œã†ã®ã§ã€ `zoomauth.AuthWithJwtToken(sdk_context);` ã®ä»£ã‚ã‚Šã«ã€`zoomauth.SDKAuth(key, secret);` ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã¤ã¾ã‚Š

```diff

+  sdkLogin: function(key, secret) {
+    let ret = zoomauth.SDKAuth(key, secret);
+    if (ret == 0) {
+      showWaitingWindow();
+    }
   } 
```

ã“ã®ã‚ˆã†ã«æ–°ã—ã„é–¢æ•°ã‚’ main.js ã«å®Ÿè£…ã—ã¦ã€

```diff
 function ProcSDKReady() {
-  showAuthwindow()
   var options = {
     authcb: sdkauthCB,
     logincb: loginretCB,
     logoutcb: null
   }
   zoomauth = zoomsdk.GetAuth(options);
+  functionObj["sdkLogin"](
+      "ã“ã“ã«å–å¾—ã—ã¦ã„ãŸ SDK Keyã‚’",  /* key */
+      "ã“ã“ã«å–å¾—ã—ã¦ã„ãŸ SDK Secretã‚’"   /* secret */
+  );
 }
```

ã¨æ›¸ãã“ã¨ã§ã€sdkLoginãŒå‘¼ã°ã‚Œã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆsdkauthCBï¼‰ä»¥é™ãŒå‹•ãå‡ºã—ã¾ã™ã€‚

ã“ã‚Œã¨ã€è¨€èªã‚’æ—¥æœ¬èªåŒ–ã™ã‚‹å‡¦ç†ï¼ˆZoomSDK_LANGUAGE_ID.LANGUAGE_Englishâ†’ZoomSDK_LANGUAGE_ID.LANGUAGE_Japaneseï¼‰ã‚’åŠ ãˆã¦ã€å·®åˆ†ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```diff:main.js
@@ -489,13 +489,16 @@ function showStartJoinWindow() {
 }

 function ProcSDKReady() {
-  showAuthwindow()
   var options = {
     authcb: sdkauthCB,
     logincb: loginretCB,
     logoutcb: null
   }
   zoomauth = zoomsdk.GetAuth(options);
+  functionObj["sdkLogin"](
+      "<çœç•¥>",  /* key */
+      "<çœç•¥>"   /* secret */
+  );
 }

 function apicallresultcb(apiname, ret) {
@@ -625,7 +628,7 @@ let functionObj = {
       path: '', // win require absolute path, mac require ''
       domain: domain,
       enable_log: enable_log,
-      langid: ZoomSDK_LANGUAGE_ID.LANGUAGE_English,
+      langid: ZoomSDK_LANGUAGE_ID.LANGUAGE_Japanese,
       locale: ZoomAPPLocale.ZNSDK_APP_Locale_Default,
       logfilesize: 5
     }
@@ -2613,6 +2616,12 @@ let functionObj = {
     }
     let ret = zoomsms.SetDefaultCellPhoneInfo(opts);
     console.log('SetDefaultCellPhoneInfo', ret);
+  },
+  sdkLogin: function(key, secret) {
+    let ret = zoomauth.SDKAuth(key, secret);
+    if (ret == 0) {
+      showWaitingWindow();
+    }
   }
 }

@@ -2629,7 +2638,10 @@ app.on('window-all-closed', function () {

 function createWindow() {
   // Create the browser window.
-  showDomainwindow();
+  functionObj["setDomain"](
+      "https://www.zoom.us", /* domain */
+      true                   /* enable_log */
+  );
 }
```

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/13879/08b4a0f7-f5ab-efed-26c2-bbf3aedaaa37.png)

ã“ã‚Œã§zoomã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã—ã¦ã®ãƒ¡ã‚¤ãƒ³ã®å®Ÿè£…ã¯å®Œäº†ã§ã™ï¼

# ã‚ã¨ã¯ãƒ‡ãƒ¢ç”¨ã®ç”¨é€”ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/13879/99ead3ed-e0fb-77b0-8e45-e558a1bc89c7.png)

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/13879/e5be432d-b9f0-6318-3840-f09321776f37.png)



GitHub ã‹ã‚‰é€£æºãƒ†ã‚¹ãƒˆ
